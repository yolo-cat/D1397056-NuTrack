# NuTrack 資料結構總覽

這是 NuTrack 營養追蹤 iOS 應用程式的完整資料結構清單。

## 📊 核心資料模型總結

### 資料結構統計
- **結構體 (Structs)**: 8 個
- **類別 (Classes)**: 1 個  
- **列舉 (Enums)**: 1 個
- **擴展 (Extensions)**: 4 個

## 🏗️ 主要資料結構清單

### 1. 營養相關結構 (NutritionModels.swift)
```swift
struct NutritionInfo           // 營養資訊
struct MealItem               // 餐點項目
struct DailyGoal             // 每日目標
struct NutrientData          // 營養素資料
struct NutritionData         // 主要營養資料
enum MealType                // 餐點類型列舉
```

### 2. 食物記錄結構 (MockData.swift)
```swift
struct FoodLogEntry          // 食物記錄條目
```

### 3. 使用者管理 (SimpleUserManager.swift)
```swift
class SimpleUserManager      // 使用者管理類別 (ObservableObject)
```

### 4. 計算工具 (WeightCalculations.swift)
```swift
struct WeightBasedNutrition  // 體重基礎營養計算
```

## 🔄 資料流向圖

```
使用者輸入 → SimpleUserManager → 體重計算 → 營養目標
                ↓
    個人化 DailyGoal ← WeightBasedNutrition
                ↓
    選擇餐點 → MealItem → NutritionInfo
                ↓
    建立記錄 → FoodLogEntry
                ↓
    統計分析 → NutritionData (顯示進度)
```

## 📋 各結構體屬性一覽

### NutritionInfo (營養資訊)
- calories: Int (卡路里)
- carbs: Int (碳水化合物)
- protein: Int (蛋白質) 
- fat: Int (脂肪)

### MealItem (餐點項目)
- id: UUID (唯一識別碼)
- name: String (餐點名稱)
- type: MealType (餐點類型)
- time: String (用餐時間)
- nutrition: NutritionInfo (營養資訊)

### MealType (餐點類型)
- breakfast ("早餐")
- lunch ("午餐") 
- dinner ("晚餐")
- icon: String (圖示名稱)

### DailyGoal (每日目標)
- calories: Int (熱量目標)
- carbs: Int (碳水目標)
- protein: Int (蛋白質目標)
- fat: Int (脂肪目標)

### NutrientData (營養素資料)
- current: Int (目前攝取)
- goal: Int (目標攝取)
- unit: String (單位)
- progress: Double (進度)
- percentage: Int (百分比)

### NutritionData (主要營養資料)
- caloriesConsumed: Int (已攝取熱量)
- caloriesBurned: Int (已消耗熱量)
- caloriesGoal: Int (熱量目標)
- carbs: NutrientData (碳水資料)
- protein: NutrientData (蛋白質資料)
- fat: NutrientData (脂肪資料)

### FoodLogEntry (食物記錄)
- id: UUID (唯一識別碼)
- time: String (記錄時間)
- meals: [MealItem]? (餐點清單，舊版)
- type: MealType? (餐點類型，舊版)
- nutrition: NutritionInfo? (營養資訊，新版)

### SimpleUserManager (使用者管理)
- isLoggedIn: Bool (登入狀態)
- currentUsername: String (使用者名稱)
- isLoading: Bool (載入狀態)
- userWeight: Double (使用者體重)
- carbsGoal: Double (碳水目標)
- proteinGoal: Double (蛋白質目標)
- fatGoal: Double (脂肪目標)

## 🧮 計算邏輯

### 熱量計算公式
```
總熱量 = (碳水化合物 × 4) + (蛋白質 × 4) + (脂肪 × 9)
```

### 體重基礎營養目標
```
碳水化合物 = 體重 × 3.0 g/kg
蛋白質 = 體重 × 1.5 g/kg
脂肪 = 體重 × 0.9 g/kg
```

### 營養素範圍
```
碳水化合物: 1-6 g/kg 體重
蛋白質: 0.8-2.2 g/kg 體重
脂肪: 0.8-1 g/kg 體重
```

## 📱 應用場景

### 1. 使用者註冊流程
1. SimpleUserManager 管理登入狀態
2. 輸入體重資料
3. WeightBasedNutrition 計算建議目標
4. 建立個人化 DailyGoal

### 2. 記錄飲食流程
1. 選擇 MealType (早/午/晚餐)
2. 選擇或輸入 MealItem
3. 系統提取 NutritionInfo
4. 建立 FoodLogEntry 記錄

### 3. 追蹤進度流程
1. 收集所有 FoodLogEntry
2. 計算總營養攝取
3. 更新 NutritionData 
4. 顯示進度和剩餘目標

## 🔧 技術特點

- **響應式設計**: 使用 @Published 和 ObservableObject
- **型別安全**: 強型別的 Swift 結構
- **計算屬性**: 即時計算營養統計
- **資料驗證**: 內建數值驗證
- **模組化**: 清楚分離不同功能
- **擴展性**: 支援未來功能擴展

## 📄 相關文件

- [詳細資料結構文件](./資料結構文件.md) - 中文版完整說明
- [Data Structures Documentation](./DATA_STRUCTURES.md) - English version
- [GEMINI.md](./GEMINI.md) - 專案概述
- [MVP_Implementation_Guide.md](./MVP_Implementation_Guide.md) - 實作指南

---
*最後更新: 2025年1月*